(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{215:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("Buidler is designed around the concepts of tasks, and the Buidler Runtime Environment, a set of functionality available for tasks. This document describes both concepts in detail.")]),t._v(" "),s("p",[s("strong",[t._v("You don't need to read this to use Buidler, you can get started with it by reading "),s("router-link",{attrs:{to:"/guides/#getting-started"}},[t._v("this guide")]),t._v(".")],1)]),t._v(" "),s("p",[t._v("If you want to write your own tasks, create your own plugins, or are just curious about Buidler internals, keep reading.")]),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("Buidler helps smart contract developers automate their workflow by letting them run and create tasks. Tasks can call other tasks, allowing complex workflows to be defined. Users and plugins can override existing tasks, making those workflows customizable and extendable.")]),t._v(" "),s("p",[t._v("A task is a JavaScript async function with some associated metadata. This metadata is used by Buidler to automate some things for you. Arguments parsing, validation, and help messages are taken care of.")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("Creating a task is done by calling the "),s("router-link",{attrs:{to:"/api/#task"}},[s("code",[t._v("task")]),t._v(" function")]),t._v(". It will return a "),s("router-link",{attrs:{to:"/api/interfaces/taskdefinition.html"}},[s("code",[t._v("TaskDefinition")])]),t._v(" object, which can be used to define the task's parameters. There are multiple ways of calling "),s("code",[t._v("task")]),t._v(", take a look at "),s("router-link",{attrs:{to:"/api/#task"}},[t._v("its API documentation")]),t._v(".")],1),t._v(" "),s("p",[t._v("The simplest task you can define is")]),t._v(" "),t._m(5),t._m(6),t._v(" "),s("ul",[t._m(7),t._v(" "),s("li",[s("code",[t._v("env")]),t._v(" is the "),s("router-link",{attrs:{to:"/documentation/#buidler-runtime-environment-bre"}},[t._v("Buidler Runtime Environment")]),t._v(".")],1),t._v(" "),t._m(8)]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._v(" "),s("p",[t._v("This is an example of a task whose action doesn't meet this requirement.")]),t._v(" "),t._m(13),t._m(14),t._v(" "),t._m(15),s("p",[t._v("Manually creating a "),s("code",[t._v("Promise")]),t._v(" can look challenging, but you don't have to do that if you stick to "),s("code",[t._v("async")]),t._v("/"),s("code",[t._v("await")]),t._v(" and "),s("code",[t._v("Promise")]),t._v("-based APIs. For example, you can use the npm package "),s("a",{attrs:{href:"https://www.npmjs.com/package/delay",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("delay")]),s("OutboundLink")],1),t._v(" for a promisified version of "),s("code",[t._v("setTimeout")]),t._v(".")]),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),s("p",[t._v("You can read the full documentation of these methods and their possible parameters in the "),s("router-link",{attrs:{to:"/api/interfaces/taskdefinition.html#methods"}},[t._v("TaskDefinition API doc")]),t._v(".")],1),t._v(" "),t._m(21),t._v(" "),s("p",[t._v("Positional and variadic parameters don't have to be named, and have the usual restrictions of a programming language:")]),t._v(" "),t._m(22),t._v(" "),s("p",[t._v("Failing to follow these restrictions will result in an exception being thrown when loading Buidler.")]),t._v(" "),t._m(23),t._v(" "),s("p",[t._v("Buidler takes care of validating and parsing the values provided for each parameter. You can declare the type of a parameter, and Buidler will get the CLI strings and convert it into your desired type. If this conversion fails, it will print an error message explaining why.")]),t._v(" "),t._m(24),t._v(" "),s("p",[t._v("An example of a task defining a type for one of its parameters is")]),t._v(" "),t._m(25),t._m(26),t._v(" "),t._m(27),t._v(" "),s("p",[t._v("Defining a task with the same name than an existing one will override it. This is useful to change or extend the behavior of built-in and plugin-provided tasks.")]),t._v(" "),s("p",[t._v("Tasks overriding works very similarly to overriding methods when extending a class. You can set your own action, which can call the previous one. The only restriction when overriding tasks, is that you can't add or remove parameters.")]),t._v(" "),t._m(28),t._v(" "),s("p",[t._v("Overriding built-in tasks is a great way to customize and extend Buidler. To know which tasks to override, take a look at "),s("a",{attrs:{href:"https://github.com/nomiclabs/buidler/tree/master/packages/buidler-core/src/builtin-tasks",target:"_blank",rel:"noopener noreferrer"}},[t._v("src/builtin-tasks"),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),s("p",[t._v("This function works like "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/super",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript's "),s("code",[t._v("super")]),t._v(" keyword"),s("OutboundLink")],1),t._v(", it calls the task's previously defined action.")]),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),s("p",[t._v("Creating tasks with lots of logic makes it hard to extend or customize them. Making multiple small and focused tasks that call each other is better to allow for extension. If you design your tasks in this way, users that want to change only a small aspect of them can override one of your internal tasks.")]),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),s("p",[t._v("The Buidler Runtime Environment, or BRE for short, is an object containing all the functionality that Buidler exposes when running a task, test and script.")]),t._v(" "),s("p",[t._v("By default, the BRE gives you programmatic access to the task runner and the config system, and exports an "),s("a",{attrs:{href:"https://eips.ethereum.org/EIPS/eip-1193",target:"_blank",rel:"noopener noreferrer"}},[t._v("EIP1193-compatible"),s("OutboundLink")],1),t._v(" Ethereum provider. You can find more information about "),s("router-link",{attrs:{to:"/api/classes/environment.html"}},[t._v("it in its API docs")]),t._v(".")],1),t._v(" "),s("p",[t._v("Plugins can extend the BRE. For example, "),s("a",{attrs:{href:"https://github.com/nomiclabs/buidler-web3",target:"_blank",rel:"noopener noreferrer"}},[t._v("buidler-web3"),s("OutboundLink")],1),t._v(" adds a "),s("code",[t._v("web3")]),t._v(" instance to it, making it available to tasks, tests and scripts.")]),t._v(" "),t._m(36),t._v(" "),s("p",[t._v("Before running a task, test or script, Buidler injects the BRE into the global scope, turning all of its fields into global variables. When the task execution is completed, these global variables are removed, restoring their original value, if they had one.")]),t._v(" "),t._m(37),t._v(" "),s("p",[t._v("Not everyone likes magic global variables, and Buidler doesn't force you to use them. Everything can be done explicitly in tasks, tests and scripts.")]),t._v(" "),t._m(38),t._v(" "),s("p",[t._v("When writing tests or scripts, you can use "),s("code",[t._v('require("@nomiclabs/buidler")')]),t._v(" to import the BRE. You can read more about this in "),s("router-link",{attrs:{to:"/documentation/#accessing-from-outside-a-task"}},[t._v("Accessing the BRE from outside a task")]),t._v(".")],1),t._v(" "),t._m(39),t._v(" "),s("p",[t._v("The BRE only provides the core functionality that users and plugin developers need to start building on top of Buidler. Using it directly in your project can be somewhat harder than expected.")]),t._v(" "),s("p",[t._v("Everything gets easier when you use higher-level libraries, like "),s("a",{attrs:{href:"https://web3js.readthedocs.io/en/latest/",target:"_blank",rel:"noopener noreferrer"}},[t._v("web3.js"),s("OutboundLink")],1),t._v(" or "),s("a",{attrs:{href:"https://github.com/trufflesuite/truffle-contract",target:"_blank",rel:"noopener noreferrer"}},[t._v("truffle-contract"),s("OutboundLink")],1),t._v(", but these libraries need some initialization to work, and that could get repetitive.")]),t._v(" "),s("p",[t._v("Buidler lets you hook into the BRE construction, and extend it with new functionality. This way, you only have to initialize everything once, and your new features or libraries will be available everywhere the BRE is used.")]),t._v(" "),t._m(40),t._v(" "),s("p",[t._v("For example, adding an instance of Web3.js to the BRE can be done in this way:")]),t._v(" "),t._m(41),t._m(42),t._v(" "),t._m(43),t._v(" "),s("p",[t._v("Running test directly with "),s("a",{attrs:{href:"https://www.npmjs.com/package/mocha",target:"_blank",rel:"noopener noreferrer"}},[t._v("mocha"),s("OutboundLink")],1),t._v(" instead of "),s("code",[t._v("npx buidler test")]),t._v(" can be done by explicitly importing the BRE in them like this:")]),t._v(" "),t._m(44),s("p",[t._v("This way, tests written for Buidler are just normal mocha tests. This enables you to run them from your favorite editor without the need of any Buidler-specific plugin. For example, you can run them from Visual Studio Code using "),s("a",{attrs:{href:"https://marketplace.visualstudio.com/items?itemName=maty.vscode-mocha-sidebar",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mocha sidebar"),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(45),t._v(" "),t._m(46),t._v(" "),s("p",[t._v("The entirety of your Builder setup is contained in this file. Feel free to add any ad-hoc configs you may find useful for your project, just make sure to assign them to "),s("code",[t._v("module.exports")]),t._v(" so they'll be accessible later on through the config object in the "),s("router-link",{attrs:{to:"/documentation/#buidler-runtime-environment-bre"}},[t._v("Builder Runtime Environment")]),t._v(".")],1),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._v(" "),t._m(54),t._v(" "),t._m(55),t._v(" "),t._m(56),t._v(" "),t._m(57),t._v(" "),t._m(58),t._m(59),t._v(" "),t._m(60),t._v(" "),t._m(61),t._v(" "),t._m(62),t._v(" "),s("p",[t._v("You can customize the different paths that buidler uses by providing an object with the following keys:")]),t._v(" "),t._m(63),t._v(" "),t._m(64),t._v(" "),t._m(65),t._v(" "),t._m(66),t._v(" "),s("p",[t._v("This is based on the "),s("a",{attrs:{href:"https://github.com/nomiclabs/buidler-ts-plugin-boilerplate/",target:"_blank",rel:"noopener noreferrer"}},[t._v("TypeScript plugin boilerplate project"),s("OutboundLink")],1),t._v(". We highly recommend to develop plugins in TypeScript.")]),t._v(" "),t._m(67),t._v(" "),s("p",[t._v("Plugins are bits of reusable configuration. Anything that you can do in a plugin, can also be done in your config file. You can test your ideas in a config file, and move them into a plugin when ready.")]),t._v(" "),s("p",[t._v("The main things that plugins can do are extending the Buidler Runtime Environment, extending the Buidler config, defining new tasks, and overriding existing ones.")]),t._v(" "),t._m(68),t._v(" "),s("p",[t._v("To learn how to successfully extend the "),s("router-link",{attrs:{to:"/documentation/#buidler-runtime-environment-bre"}},[t._v("BRE")]),t._v(" in TypeScript, and to give your users type information about your extension, take a look at "),s("a",{attrs:{href:"https://github.com/nomiclabs/buidler-ts-plugin-boilerplate/blob/master/src/index.ts",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("src/index.ts")]),s("OutboundLink")],1),t._v(" in the boilerplate repo and read the "),s("router-link",{attrs:{to:"/documentation/#extending"}},[t._v("Extending the BRE")]),t._v(" documentation.")],1),t._v(" "),s("p",[t._v("Make sure to keep the type extension in your main file, as that convention is used across different plugins.")]),t._v(" "),t._m(69),t._v(" "),s("p",[t._v("An example on how to add fields to the Buidler config can be found in "),s("a",{attrs:{href:"https://github.com/nomiclabs/buidler-ts-plugin-boilerplate/blob/master/src/index.ts",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("src/index.ts")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Note that all config extension's have to be optional.")]),t._v(" "),t._m(70),t._v(" "),s("p",[t._v("To show better stack traces to your users, please only throw "),s("router-link",{attrs:{to:"/api/classes/buidlerpluginerror.html#constructors"}},[s("code",[t._v("BuidlerPluginError")])]),t._v(" errors, which can be found in "),s("code",[t._v("@nomiclabs/buidler/plugins")]),t._v(".")],1),t._v(" "),t._m(71),t._v(" "),t._m(72),t._v(" "),s("p",[t._v("An example on how to use them is present in "),s("a",{attrs:{href:"https://github.com/nomiclabs/buidler-ts-plugin-boilerplate/blob/master/src/index.ts",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("src/index.ts")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(73),t._v(" "),s("p",[t._v("Knowing when to use a "),s("code",[t._v("dependency")]),t._v(" or a "),s("code",[t._v("peerDependency")]),t._v(" can be tricky. We recommend "),s("a",{attrs:{href:"https://yarnpkg.com/blog/2018/04/18/dependencies-done-right/",target:"_blank",rel:"noopener noreferrer"}},[t._v("these"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://lexi-lambda.github.io/blog/2016/08/24/understanding-the-npm-dependency-model/",target:"_blank",rel:"noopener noreferrer"}},[t._v("articles"),s("OutboundLink")],1),t._v(" to learn about their distinctions.")]),t._v(" "),s("p",[t._v("If you are still in doubt, these can be helpful:")]),t._v(" "),t._m(74),t._v(" "),t._m(75),t._v(" "),t._m(76),t._v(" "),s("p",[t._v("To integrate into your users' existing workflow, we recommend plugin authors to override built-in tasks whenever it makes sense.")]),t._v(" "),s("p",[t._v("Examples of suggested overrides are:")]),t._v(" "),t._m(77),t._v(" "),s("p",[t._v("For a list of all the built-in tasks and internal tasks please take a look at "),s("a",{attrs:{href:"https://github.com/nomiclabs/buidler/blob/master/packages/buidler-core/src/builtin-tasks/task-names.ts",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("task-names.ts")]),s("OutboundLink")],1)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"documentation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#documentation","aria-hidden":"true"}},[this._v("#")]),this._v(" Documentation")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"overview"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#overview","aria-hidden":"true"}},[this._v("#")]),this._v(" Overview")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"tasks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tasks","aria-hidden":"true"}},[this._v("#")]),this._v(" Tasks")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"creating-your-own-tasks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-your-own-tasks","aria-hidden":"true"}},[this._v("#")]),this._v(" Creating your own tasks")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You can create your own tasks in your "),e("code",[this._v("buidler.config.js")]),this._v(" file. The Config DSL will be available in the global environment, with functions for defining tasks. You can also import the DSL with "),e("code",[this._v('require("@nomiclabs/buidler/config")')]),this._v(" if you prefer to keep things explicit, and take advantage of your editor's autocomplete.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("task")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"Prints 'Hello, World!'\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("taskArguments"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" runSuper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello, World!'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("task")]),this._v("'s first argument is the task name. The second one is its description, which is used for printing help messages in the CLI. The third one, "),e("code",[this._v("action")]),this._v(", is an async function that receives the following arguments:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("code",[this._v("taskArguments")]),this._v(" is an object with the parsed CLI arguments of the task. In this case, it's an empty object.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("code",[this._v("runSuper")]),this._v(" is only relevant if you are overriding an existing task, which we'll learn about next. Its purpose is to let you run the original task's action.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Defining the action's arguments is optional. The Buidler Runtime Environment and "),e("code",[this._v("runSuper")]),this._v(' will also be available in the global scope. We can rewrite our "hello" task this way:')])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("task")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"Prints 'Hello, World!'\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello, World!'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"tasks-actions-requirements"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tasks-actions-requirements","aria-hidden":"true"}},[this._v("#")]),this._v(" Tasks' actions requirements")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The only requirement for writing a task is that the "),e("code",[this._v("Promise")]),this._v(" returned by its action must not resolve before every async process it started is finished.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("task")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"BAD"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This task is broken"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This tasks\' action returned a promise that resolved before I was thrown"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This other task uses a "),e("code",[this._v("Promise")]),this._v(" to wait for the timeout to fire.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("task")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"delayed-hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"Prints 'Hello, World!' after a second\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello, World!'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"defining-parameters"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#defining-parameters","aria-hidden":"true"}},[this._v("#")]),this._v(" Defining parameters")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Buidler tasks can receive "),e("code",[this._v("--named")]),this._v(" parameters with a value, "),e("code",[this._v("--flags")]),this._v(", positional and variadic parameters. Variadic parameters act like JavaScript's rest parameters. The Config DSL "),e("code",[this._v("task")]),this._v(" function returns an object with methods to define all of them. Once defined, Buidler takes control of parsing parameters, validating them, and printing help messages.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Adding a positional parameter to the "),e("code",[this._v("hello")]),this._v(" task can look like this:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("task")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Prints a greeting\'"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addOptionalParam")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"greeting"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The greeting to print"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" greeting "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("greeting"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("And would be run with "),e("code",[this._v("npx buidler hello --greeting Hola")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"positional-parameters-restrictions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#positional-parameters-restrictions","aria-hidden":"true"}},[this._v("#")]),this._v(" Positional parameters restrictions")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("No parameter can follow a variadic one")]),this._v(" "),e("li",[this._v("Required/mandatory parameters can't follow an optional one.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"type-validations"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#type-validations","aria-hidden":"true"}},[this._v("#")]),this._v(" Type validations")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("A number of types are available in the Config DSL through a "),e("code",[this._v("types")]),this._v(" object. This object is injected into the global scope before processing your "),e("code",[this._v("buidler.config.js")]),this._v(", but you can also import it explicitly with "),e("code",[this._v('const { types } = require("@nomiclabs/buidler/config")')]),this._v(" and take advantage of your editor's autocomplete.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("task")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"Prints 'Hello' multiple times\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addOptionalParam")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"times"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"The number of times to print 'Hello'\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" types"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("int"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" times "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" times"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Calling it with "),e("code",[this._v("npx buidler hello --times notanumber")]),this._v(" will result in an error.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"overriding-tasks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#overriding-tasks","aria-hidden":"true"}},[this._v("#")]),this._v(" Overriding tasks")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Tasks override order is important since actions can only call the immediately previous definition, using the "),e("code",[this._v("runSuper")]),this._v(" function.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"the-runsuper-function"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-runsuper-function","aria-hidden":"true"}},[this._v("#")]),this._v(" The "),e("code",[this._v("runSuper")]),this._v(" function")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("runSuper")]),this._v(" is a function available to override task's actions. It can be received as the third argument of the task or used directly from the global object.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("code",[this._v("runSuper")]),this._v(" function receives a single optional argument: an object with the task arguments. If this argument isn't provided, the same task arguments received by the action calling it will be used.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"internal-tasks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#internal-tasks","aria-hidden":"true"}},[this._v("#")]),this._v(" Internal tasks")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("For example, the "),s("code",[t._v("compile")]),t._v(" task is implemented as a pipeline of six tasks. It just calls internal tasks like "),s("code",[t._v("compile:get-source-paths")]),t._v(", "),s("code",[t._v("compile:get-dependency-graph")]),t._v(", and "),s("code",[t._v("compile:build-artifacts")]),t._v(". We recommend prefixing intermediate tasks with their main task and a colon.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To avoid help messages getting cluttered with lots of intermediate tasks, you can define those using the "),e("code",[this._v("internalTask")]),this._v(" config DSL function. The "),e("code",[this._v("internalTask")]),this._v(" function works almost exactly like "),e("code",[this._v("task")]),this._v(". The only difference is that tasks defined with it won't be included in help messages.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"buidler-runtime-environment-bre"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#buidler-runtime-environment-bre","aria-hidden":"true"}},[this._v("#")]),this._v(" Buidler Runtime Environment (BRE)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"exporting-globally"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exporting-globally","aria-hidden":"true"}},[this._v("#")]),this._v(" Exporting globally")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"explicit-usage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#explicit-usage","aria-hidden":"true"}},[this._v("#")]),this._v(" Explicit usage")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You can import the config DSL explicitly when defining your tasks, and receive the BRE explicitly as an argument to your actions. You can read more about this in "),e("a",{attrs:{href:"#creating-your-own-tasks"}},[this._v("Creating your own tasks")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"extending"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#extending","aria-hidden":"true"}},[this._v("#")]),this._v(" Extending")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You can do this by adding a BRE extender into a queue. This extender is just a synchronous function that receives the BRE, and adds fields to it with your new functionality. These new fields will also get "),e("a",{attrs:{href:"#exporting-globally"}},[this._v("injected into the global scope during runtime")]),this._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extendEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("env")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Web3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"web3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// env.ethereum is the EIP1193-compatible provider.")]),t._v("\n  env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("web3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Web3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Web3HTTPProviderAdapter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ethereum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"accessing-from-outside-a-task"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#accessing-from-outside-a-task","aria-hidden":"true"}},[this._v("#")]),this._v(" Accessing from outside a task")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The BRE can be used from any JavaScript or TypeScript file. To do so, you only have to import it with "),e("code",[this._v('require("@nomiclabs/buidler")')]),this._v(". You can do this to keep more control over your development workflow, create your own tools, or to use Buidler with other dev tools from the node.js ecosystem.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@nomiclabs/buidler"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" assert "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"assert"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Buidler Runtime Environment"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"should have a config field"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    assert"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("notEqual")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Buidler is exporting a JavaScript object from a "),e("code",[this._v("buidler.config.js")]),this._v(" file, which, by default, lives in the root of your project.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("An empty "),e("code",[this._v("builder.config.js")]),this._v(" is enough for builder to work.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"available-config-options"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#available-config-options","aria-hidden":"true"}},[this._v("#")]),this._v(" Available config options")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The exported config object can have the following entries: "),e("code",[this._v("networks")]),this._v(", "),e("code",[this._v("solc")]),this._v(", and "),e("code",[this._v("paths")]),this._v(". A complete configuration would look like this:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  networks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  solc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("…"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  paths"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("…"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"networks-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#networks-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Networks configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("code",[this._v("networks")]),this._v(" config field is an optional object where network names map to objects with the following optional fields:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("url")]),t._v(": The url of the node. Default value: "),s("code",[t._v('"http://localhost:8545"')]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("chainId")]),t._v(": An optional number, used to validate the network Buidlers connect to. If not present, this validation is ommited.")]),t._v(" "),s("li",[s("code",[t._v("from")]),t._v(": The address to use as default sender. If not present the first account of the node is used.")]),t._v(" "),s("li",[s("code",[t._v("gas")]),t._v(": Its value should be "),s("code",[t._v('"auto"')]),t._v(" or a number. If a number is used, it will be the gas limit used by default in every transaction. If "),s("code",[t._v('"auto"')]),t._v(" is used, the gas limit will be automatically estimated. Default value: "),s("code",[t._v('"auto"')]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("gasPrice")]),t._v(": Its value should be "),s("code",[t._v('"auto"')]),t._v(" or a number. This parameter behaves like "),s("code",[t._v("gas")]),t._v(". Default value: "),s("code",[t._v('"auto"')]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("gasMultiplier")]),t._v(": A number used to multiply the results of gas estimation to give it some slack due to the uncertenty of the estimation process. Default: "),s("code",[t._v("1.25")]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("accounts")]),t._v(": This field controls which accounts Buidler uses. It can use the node's accounts (by setting it to "),s("code",[t._v('"remote"')]),t._v("), a list of local accounts (by setting it to an array of hex-encoded private keys), or use an HD Wallet (see below). Default value: "),s("code",[t._v('"remote"')]),t._v(".")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"hd-wallet-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hd-wallet-config","aria-hidden":"true"}},[this._v("#")]),this._v(" HD Wallet config")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To use an HD Wallet with Buidler you should set your network's "),e("code",[this._v("accounts")]),this._v(" field to an object with the following fields:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("mnemonic")]),t._v(": A required string with the mnemonic of the wallet.")]),t._v(" "),s("li",[s("code",[t._v("path")]),t._v(": The HD parent of all the derived keys. Default value: "),s("code",[t._v("\"m/44'/60'/0'/0\"")]),t._v(".")]),t._v(" "),s("li",[t._v("initialIndex: The initial index to derive. Default value: "),s("code",[t._v("0")]),t._v(".")]),t._v(" "),s("li",[t._v("count: The number of accounts to derive. Default value: "),s("code",[t._v("10")]),t._v(".")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"default-networks-object"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#default-networks-object","aria-hidden":"true"}},[this._v("#")]),this._v(" Default networks object")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("develop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1:8545"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"solc-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#solc-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Solc configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("code",[this._v("solc")]),this._v(" config field is an optional object which can contain the following keys:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("version")]),t._v(": The solc version to use. We recommend always setting this field. Default value: "),s("code",[t._v('"0.5.3"')]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("optimizer")]),t._v(": An object with "),s("code",[t._v("enabled")]),t._v(" and "),s("code",[t._v("runs")]),t._v(" keys. Default value: "),s("code",[t._v("{ enabled: false, runs: 200 }")]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("evmVersion")]),t._v(": A string controlling the target evm version. One of "),s("code",[t._v('"homestead"')]),t._v(", "),s("code",[t._v('"tangerineWhistle"')]),t._v(", "),s("code",[t._v('"spuriousDragon"')]),t._v(", "),s("code",[t._v('"byzantium"')]),t._v(", and "),s("code",[t._v('"constantinople"')]),t._v(". Default value: "),s("code",[t._v('"byzantium"')]),t._v(".")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"path-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#path-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Path configuration")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("p",[s("code",[t._v("root")]),t._v(": The root of the Buidler project. This path is resolved from the "),s("code",[t._v("buidler.config.js")]),t._v("'s directory. Default value: '.'.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("sources")]),t._v(": The directory where your contract are stored. This path is resolved from the project's root. Default value: './contracts'.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("tests")]),t._v(": The directory where your tests are located. This path is resolved from the project's root. Default value: './test'.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("cache")]),t._v(": The directory used by Buidler to cache its internal stuff. This path is resolved from the project's root. Default value: './cache'.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("artifacts")]),t._v(": The directory where the compilation artifacts are stored. This path is resolved from the project's root. Default value: './artifacts'.")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"quickly-integrating-other-tools"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#quickly-integrating-other-tools","aria-hidden":"true"}},[this._v("#")]),this._v(" Quickly integrating other tools")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Buidler's config file will always run before any task, so you can use it to integrate with other tools, like importing "),e("code",[this._v("@babel/register")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"plugin-development-best-practices"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#plugin-development-best-practices","aria-hidden":"true"}},[this._v("#")]),this._v(" Plugin development best practices")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"plugin-functionality"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#plugin-functionality","aria-hidden":"true"}},[this._v("#")]),this._v(" Plugin functionality")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"extending-the-bre"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#extending-the-bre","aria-hidden":"true"}},[this._v("#")]),this._v(" Extending the BRE")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"extending-the-buidler-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#extending-the-buidler-config","aria-hidden":"true"}},[this._v("#")]),this._v(" Extending the Buidler config")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"throwing-errors-from-your-plugins"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#throwing-errors-from-your-plugins","aria-hidden":"true"}},[this._v("#")]),this._v(" Throwing errors from your plugins")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"optimizing-your-plugin-for-better-startup-time"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#optimizing-your-plugin-for-better-startup-time","aria-hidden":"true"}},[this._v("#")]),this._v(" Optimizing your plugin for better startup time")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Keeping startup time short is vital to give a good user experience. To do so, Buidler and its plugins delay any slow import or initialization until the very last moment. To do so, you can use "),e("code",[this._v("lazyObject")]),this._v(", and "),e("code",[this._v("lazyFunction")]),this._v(" from "),e("code",[this._v("@nomiclabs/buidler/plugins")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"notes-on-dependencies"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#notes-on-dependencies","aria-hidden":"true"}},[this._v("#")]),this._v(" Notes on dependencies")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Rule of thumb #1: Buidler MUST be a peer dependency.")]),this._v(" "),e("li",[this._v("Rule of thumb #2: If your plugin P depends on another plugin P2, P2 should be a peer dependency of P, and P2's peer dependencies should be peer dependencies of P.")]),this._v(" "),e("li",[this._v("Rule of thumb #3: If you have a non-Buidler dependency that your users may "),e("code",[this._v("require()")]),this._v(", it should be a peer dependency.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Also, if you depend on a Buidler plugin written in TypeScript, you should add it's main "),e("code",[this._v(".d.ts")]),this._v(" to the "),e("code",[this._v("include")]),this._v(" array of "),e("code",[this._v("tsconfig.json")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"hooking-into-the-user-s-workflow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hooking-into-the-user-s-workflow","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooking into the user's workflow")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Preprocessing smart contracts should override one of the "),s("code",[t._v("compile")]),t._v(" internal tasks.")]),t._v(" "),s("li",[t._v("Linter integrations should override the "),s("code",[t._v("check")]),t._v(" task.")]),t._v(" "),s("li",[t._v("Plugins generating intermediate files should override the "),s("code",[t._v("clean")]),t._v(" task.")])])}],!1,null,null,null);e.default=n.exports}}]);